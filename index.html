<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Streaming Portal</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #1E1E1E;
            color: #FFFFFF;
            display: flex;
            flex-direction: row;
        }
        #controls {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
        }
        .button, .icon {
            width: 60px;
            height: 60px;
            margin: 10px 0;
            background-color: #0000FF;
            color: #FFFFFF;
            text-align: center;
            line-height: 60px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            user-select: none;
        }
        .button { background-color: #007BFF; }
        .icon.pen { background-color: #FFFF00; }
        .icon.marker { background-color: #FF0000; }
        .icon.highlighter { background-color: #00FF00; }
        .icon.text { background-color: #008000; }
        .icon.sticky { background-color: #FFC0CB; }
        #drawingBoard {
            border: 2px solid #000000;
            width: 100vw;
            height: 80vh;
            background-color: #000000;
            position: relative;
            margin-left: 100px; /* Adjust to fit controls panel */
        }
        .sticky-note {
            position: absolute;
            width: 200px;
            height: 200px;
            background-color: #FFFF00;
            color: #000000;
            padding: 10px;
            border-radius: 5px;
            resize: both;
            overflow: auto;
            display: none;
        }
        .sticky-note input {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            color: inherit;
            font-size: 16px;
            outline: none;
        }
        #timeline {
            position: fixed;
            top: 80px;
            left: 20px;
            color: #FFFFFF;
        }
        #fullscreen {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #0000FF;
            color: #FFFFFF;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="controls">
        <div class="button" id="startLive">Go Live</div>
        <div class="button" id="endLive">End Live</div>
        <div class="button" id="microphoneToggle">Microphone Off</div>
        <div class="icon pen" id="penTool">P</div>
        <div class="icon marker" id="markerTool">M</div>
        <div class="icon highlighter" id="highlighterTool">H</div>
        <div class="icon text" id="textTool">T</div>
        <div class="icon sticky" id="stickyNoteTool">S</div>
        <div id="timeline">Time Elapsed: 00:00</div>
        <div id="fullscreen">Fullscreen</div>
    </div>
    <div id="drawingBoard"></div>

    <script>
        const board = document.getElementById('drawingBoard');
        const context = board.getContext('2d');
        let drawing = false;
        let startTime = null;
        let currentTool = 'pen';

        function startLive() {
            navigator.mediaDevices.getUserMedia({ audio: true })
                .then(stream => {
                    document.getElementById('microphoneToggle').innerText = 'Microphone On';
                    const audioContext = new AudioContext();
                    const source = audioContext.createMediaStreamSource(stream);
                    // Audio processing can be handled here
                });
            startTime = Date.now();
            setInterval(updateTimeline, 1000);
        }

        function endLive() {
            document.getElementById('microphoneToggle').innerText = 'Microphone Off';
            // Stop the stream and clean up
        }

        function updateTimeline() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timeline').innerText = `Time Elapsed: ${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function toggleFullscreen() {
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                document.documentElement.requestFullscreen();
            }
        }

        function toggleMicrophone() {
            const button = document.getElementById('microphoneToggle');
            if (button.innerText === 'Microphone Off') {
                startLive();
            } else {
                endLive();
            }
        }

        document.getElementById('startLive').addEventListener('click', startLive);
        document.getElementById('endLive').addEventListener('click', endLive);
        document.getElementById('microphoneToggle').addEventListener('click', toggleMicrophone);
        document.getElementById('fullscreen').addEventListener('click', toggleFullscreen);

        function addStickyNote() {
            const color = prompt('Enter color (e.g., #FFFF00):');
            const note = document.createElement('div');
            note.classList.add('sticky-note');
            note.style.backgroundColor = color;
            note.innerHTML = '<input type="text" placeholder="Type here...">';
            note.style.top = `${Math.random() * (window.innerHeight - 200)}px`;
            note.style.left = `${Math.random() * (window.innerWidth - 200)}px`;
            document.body.appendChild(note);
            note.style.display = 'block';
        }

        function setTool(tool) {
            currentTool = tool;
            context.strokeStyle = '#FFFF00'; // default pen color
            context.lineWidth = 2;
            if (tool === 'pen') context.lineWidth = 2;
            else if (tool === 'marker') context.lineWidth = 4;
            else if (tool === 'highlighter') context.lineWidth = 6;
        }

        document.getElementById('penTool').addEventListener('click', () => setTool('pen'));
        document.getElementById('markerTool').addEventListener('click', () => setTool('marker'));
        document.getElementById('highlighterTool').addEventListener('click', () => setTool('highlighter'));
        document.getElementById('textTool').addEventListener('click', () => {
            const text = prompt('Enter text:');
            const x = Math.random() * board.width;
            const y = Math.random() * board.height;
            context.font = '20px Arial';
            context.fillText(text, x, y);
        });
        document.getElementById('stickyNoteTool').addEventListener('click', addStickyNote);

        board.addEventListener('mousedown', () => drawing = true);
        board.addEventListener('mouseup', () => drawing = false);
        board.addEventListener('mousemove', (event) => {
            if (drawing) {
                if (currentTool === 'pen' || currentTool === 'marker' || currentTool === 'highlighter') {
                    context.beginPath();
                    context.lineTo(event.clientX - board.offsetLeft, event.clientY - board.offsetTop);
                    context.stroke();
                }
            }
        });

        window.addEventListener('resize', () => {
            board.width = window.innerWidth - 100; // Adjust width to account for controls
            board.height = window.innerHeight;
        });

        // Initialize canvas size
        window.dispatchEvent(new Event('resize'));
    </script>
</body>
</html>
